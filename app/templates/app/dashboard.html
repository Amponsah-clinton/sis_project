{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard - ScholarIndex</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="{% static 'app/css/dashboard.css' %}">
    {% block extra_css %}{% endblock %}
    <style>
        /* CSS Variables */
        :root {
            --background: 0 0% 98%;
            --foreground: 217 33% 17%;
            --card: 0 0% 100%;
            --card-foreground: 217 33% 17%;
            --primary: 221 83% 53%;
            --primary-foreground: 0 0% 100%;
            --secondary: 210 40% 96%;
            --secondary-foreground: 217 33% 17%;
            --muted: 220 14% 96%;
            --muted-foreground: 217 10% 55%;
            --border: 220 13% 91%;
            --sidebar-background: 0 0% 100%;
            --sidebar-foreground: 217 33% 17%;
            --sidebar-border: 220 13% 91%;
            --success: 142 71% 45%;
            --destructive: 0 84% 60%;
        }
        /* Override Tailwind reset */
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen', 'Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans', 'Helvetica Neue', sans-serif !important;
            background-color: hsl(var(--background)) !important;
            color: hsl(var(--foreground)) !important;
            margin: 0 !important;
            padding: 0 !important;
        }
        .sidebar-wrapper {
            display: flex !important;
            min-height: 100vh !important;
            width: 100% !important;
        }
        
        /* Dashboard Modern Styles */
        .dashboard-main {
            background: #f9fafb;
        }
        
        /* Stat Cards Hover Effects */
        .stat-card-modern {
            transition: all 0.2s ease;
        }
        .stat-card-modern:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
        }
        
        /* Table Row Hover */
        .request-table tbody tr:hover {
            background-color: #f9fafb;
        }
        
        /* Responsive Grid */
        @media (max-width: 1400px) {
            .dashboard-content > div[style*="grid-template-columns: 1fr 320px"] {
                grid-template-columns: 1fr !important;
            }
            .dashboard-content > div[style*="grid-template-columns: 1fr 320px"] > div:last-child {
                margin-top: 1.5rem;
            }
        }
        
        @media (max-width: 1024px) {
            .dashboard-content > div[style*="grid-template-columns: repeat(4, 1fr)"] {
                grid-template-columns: repeat(2, 1fr) !important;
            }
        }
        
        @media (max-width: 640px) {
            .dashboard-content > div[style*="grid-template-columns: repeat(4, 1fr)"] {
                grid-template-columns: 1fr !important;
            }
        }
    </style>
    <script crossorigin src="https://unpkg.com/react@17/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@17/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
    <script src="https://unpkg.com/recharts@2.15.4/umd/Recharts.js"></script>
</head>
<body>
    <div class="sidebar-wrapper" id="sidebarWrapper">
        <!-- Sidebar -->
        <aside class="sidebar" id="sidebar" data-state="expanded">
            <div class="sidebar-content">
                <div class="sidebar-header">
                    <div class="logo-container">
                        <div class="logo-icon">S</div>
                        <span class="logo-text" id="logoText">ScholarIndex</span>
                    </div>
                </div>

                <div class="sidebar-menu-section">
                    <div class="menu-group">
                        <div class="menu-label">MENU</div>
                        <ul class="menu-list">
                            <li class="menu-item">
                                <a href="#" class="menu-link active" data-tooltip="Dashboard">
                                    <i data-lucide="layout-dashboard"></i>
                                    <span>Dashboard</span>
                                </a>
                            </li>
                            <li class="menu-item collapsible">
                                <button class="menu-link collapsible-trigger" data-tooltip="Articles">
                                    <i data-lucide="file-text"></i>
                                    <span>Articles</span>
                                    <i data-lucide="chevron-down" class="chevron"></i>
                                </button>
                                <ul class="menu-sub">
                                    <li><a href="{% url 'app:indexed_articles' %}" class="menu-sub-link">Articles</a></li>
                                    <li><a href="{% url 'app:indexed_journals' %}" class="menu-sub-link">Journals</a></li>
                                    <li><a href="{% url 'app:project_archive' %}" class="menu-sub-link">Research and project archive</a></li>
                                    <li><a href="{% url 'app:register_journal' %}" class="menu-sub-link">Add a journal</a></li>
                                    <li><a href="{% url 'app:upload_article' %}" class="menu-sub-link">Add an article</a></li>
                                    <li><a href="{% url 'app:upload_project' %}" class="menu-sub-link">Add project archive</a></li>
                                </ul>
                            </li>
                            <li class="menu-item collapsible">
                                <button class="menu-link collapsible-trigger" data-tooltip="Documents">
                                    <i data-lucide="file-text"></i>
                                    <span>Documents</span>
                                    <i data-lucide="chevron-down" class="chevron"></i>
                                </button>
                                <ul class="menu-sub">
                                    <li><a href="{% url 'app:dashboard' %}" class="menu-sub-link">All Request</a></li>
                                    <li><a href="{% url 'app:check_turnitin' %}" class="menu-sub-link">Check plagiarism</a></li>
                                    <li><a href="{% url 'app:work_plagiarism' %}" class="menu-sub-link">Work plagiarism</a></li>
                                    <li><a href="{% url 'app:thesis_to_article' %}" class="menu-sub-link">Thesis to article</a></li>
                                    <li><a href="{% url 'app:thesis_to_book' %}" class="menu-sub-link">Thesis to book</a></li>
                                    <li><a href="{% url 'app:thesis_to_book_chapter' %}" class="menu-sub-link">Thesis to book chapter</a></li>
                                    <li><a href="{% url 'app:powerpoint_preparation' %}" class="menu-sub-link">Power point preparation</a></li>
                                </ul>
                            </li>
                            <li class="menu-item collapsible">
                                <button class="menu-link collapsible-trigger" data-tooltip="Roles Eminent personalities">
                                    <i data-lucide="award"></i>
                                    <span>Roles Eminent personalities</span>
                                    <i data-lucide="chevron-down" class="chevron"></i>
                                </button>
                                <ul class="menu-sub">
                                    <li><a href="{% url 'app:directory_researchers' %}" class="menu-sub-link">Directory of researchers</a></li>
                                    <li><a href="{% url 'app:council_members' %}" class="menu-sub-link">Council members</a></li>
                                    <li><a href="{% url 'app:team_members' %}" class="menu-sub-link">Team members</a></li>
                                    <li><a href="{% url 'app:request_membership' %}" class="menu-sub-link">Reg Institutions</a></li>
                                    <li><a href="{% url 'app:account_detail' %}" class="menu-sub-link">Accounts</a></li>
                                    <li><a href="{% url 'app:donate' %}" class="menu-sub-link">Donate</a></li>
                                </ul>
                            </li>
                            <li class="menu-item collapsible">
                                <button class="menu-link collapsible-trigger" data-tooltip="News">
                                    <i data-lucide="newspaper"></i>
                                    <span>News</span>
                                    <i data-lucide="chevron-down" class="chevron"></i>
                                </button>
                                <ul class="menu-sub">
                                    <li><a href="{% url 'app:news_list' %}" class="menu-sub-link">Published records</a></li>
                                    <li><a href="{% url 'app:news_add' %}" class="menu-sub-link">Write | create new blog</a></li>
                                </ul>
                            </li>
                        </ul>
                    </div>

                    <div class="menu-group">
                        <ul class="menu-list">
                            <li class="menu-item">
                                <a href="{% url 'app:donate' %}" class="menu-link" data-tooltip="Payment">
                                    <i data-lucide="credit-card"></i>
                                    <span>Payment</span>
                                </a>
                            </li>
                            <li class="menu-item">
                                <a href="{% url 'app:settings' %}" class="menu-link" data-tooltip="Settings">
                                    <i data-lucide="settings"></i>
                                    <span>Settings</span>
                                </a>
                            </li>
                        </ul>
                    </div>
                </div>
            </div>
        </aside>

        <!-- Main Content -->
        <div class="main-content">
            <!-- Top Navigation -->
            <header class="top-nav">
                <div class="top-nav-left">
                    <button class="sidebar-trigger" id="sidebarTrigger">
                        <i data-lucide="panel-left"></i>
                    </button>
                    <div class="search-container">
                        <i data-lucide="search" class="search-icon"></i>
                        <input type="text" placeholder="Search or type command..." class="search-input">
                        <kbd class="search-kbd">âŒ˜K</kbd>
                    </div>
                </div>
                <div class="top-nav-right">
                    <button class="icon-button" id="themeToggle">
                        <i data-lucide="moon" id="themeIcon"></i>
                    </button>
                    <div class="notification-menu">
                        <button class="icon-button notification-button" id="notificationTrigger">
                            <i data-lucide="bell"></i>
                            <span class="notification-badge">3</span>
                        </button>
                        <div class="notification-backdrop" id="notificationBackdrop"></div>
                        <div class="notification-dropdown" id="notificationDropdown">
                            <div class="notification-header">
                                <h3 class="notification-title">Notifications</h3>
                                <div class="notification-header-actions">
                                    <button class="notification-mark-all">Mark all as read</button>
                                    <button class="notification-close" id="notificationClose" aria-label="Close notifications">
                                        <i data-lucide="x"></i>
                                    </button>
                                </div>
                            </div>
                            <div class="notification-list">
                                <div class="notification-item unread">
                                    <div class="notification-icon">
                                        <i data-lucide="user-plus"></i>
                                    </div>
                                    <div class="notification-content">
                                        <p class="notification-text"><strong>New article submitted</strong></p>
                                        <p class="notification-time">2 minutes ago</p>
                                    </div>
                                </div>
                                <div class="notification-item unread">
                                    <div class="notification-icon">
                                        <i data-lucide="file-check"></i>
                                    </div>
                                    <div class="notification-content">
                                        <p class="notification-text"><strong>Journal registration approved</strong></p>
                                        <p class="notification-time">15 minutes ago</p>
                                    </div>
                                </div>
                                <div class="notification-item unread">
                                    <div class="notification-icon">
                                        <i data-lucide="alert-circle"></i>
                                    </div>
                                    <div class="notification-content">
                                        <p class="notification-text"><strong>Review pending</strong></p>
                                        <p class="notification-time">1 hour ago</p>
                                    </div>
                                </div>
                                <div class="notification-item">
                                    <div class="notification-icon">
                                        <i data-lucide="check-circle"></i>
                                    </div>
                                    <div class="notification-content">
                                        <p class="notification-text"><strong>Project archived successfully</strong></p>
                                        <p class="notification-time">2 hours ago</p>
                                    </div>
                                </div>
                                <div class="notification-item">
                                    <div class="notification-icon">
                                        <i data-lucide="mail"></i>
                                    </div>
                                    <div class="notification-content">
                                        <p class="notification-text"><strong>New message from admin</strong></p>
                                        <p class="notification-time">3 hours ago</p>
                                    </div>
                                </div>
                            </div>
                            <div class="notification-footer">
                                <a href="#" class="notification-view-all">View all notifications</a>
                            </div>
                        </div>
                    </div>
                    <div class="user-menu">
                        <button class="user-menu-trigger" id="userMenuTrigger">
                            <div class="avatar">
                                {% if user.is_authenticated and profile.profile_photo %}
                                    <img src="{{ profile.profile_photo.url }}" alt="{{ user.get_full_name|default:user.username }}" style="width: 100%; height: 100%; object-fit: cover; border-radius: 50%;">
                                {% else %}
                                    {% if user.is_authenticated %}
                                        {{ user.first_name|first|default:user.username|first|upper }}{{ user.last_name|first|default:""|upper }}
                                    {% else %}
                                        U
                                    {% endif %}
                                {% endif %}
                            </div>
                            <span class="user-name">
                                {% if user.is_authenticated %}
                                    {{ user.get_full_name|default:user.username }}
                                {% else %}
                                    User
                                {% endif %}
                            </span>
                        </button>
                        <div class="dropdown-menu" id="userDropdown">
                            <a href="{% url 'app:account_detail' %}" class="dropdown-item">
                                <i data-lucide="user"></i>
                                Manage Account profile
                            </a>
                            <div class="dropdown-separator"></div>
                            <a href="{% url 'app:upload_article' %}" class="dropdown-item">
                                <i data-lucide="upload"></i>
                                Upload Articles
                            </a>
                            <a href="{% url 'app:register_journal' %}" class="dropdown-item">
                                <i data-lucide="book"></i>
                                Upload Journal
                            </a>
                            <a href="{% url 'app:upload_project' %}" class="dropdown-item">
                                <i data-lucide="folder"></i>
                                Upload a project
                            </a>
                            <div class="dropdown-separator"></div>
                            <div class="dropdown-item dropdown-parent" id="requestsDropdown">
                                <i data-lucide="inbox"></i>
                                <span>Requests</span>
                                <i data-lucide="chevron-right" class="dropdown-arrow"></i>
                                <div class="dropdown-submenu" id="requestsSubmenu">
                                    <a href="{% url 'app:check_turnitin' %}" class="dropdown-subitem">
                                        Check Plagiarism
                                    </a>
                                    <a href="{% url 'app:work_plagiarism' %}" class="dropdown-subitem">
                                        Work Plagiarism
                                    </a>
                                    <div class="dropdown-subseparator"></div>
                                    <a href="{% url 'app:thesis_to_article' %}" class="dropdown-subitem">
                                        Thesis to articles
                                    </a>
                                    <a href="{% url 'app:thesis_to_book' %}" class="dropdown-subitem">
                                        Thesis to book
                                    </a>
                                    <a href="{% url 'app:thesis_to_book_chapter' %}" class="dropdown-subitem">
                                        Thesis to book chapter
                                    </a>
                                    <a href="{% url 'app:powerpoint_preparation' %}" class="dropdown-subitem">
                                        Power point preparation
                                    </a>
                                </div>
                            </div>
                            <div class="dropdown-separator"></div>
                            <a href="{% url 'app:auth' %}" class="dropdown-item" style="color: #dc2626;">
                                <i data-lucide="log-out"></i>
                                Log out
                            </a>
                        </div>
                    </div>
                </div>
            </header>

            <!-- Dashboard Content -->
            <main class="dashboard-main">
                <div class="dashboard-content">
                    {% block content %}
                    <!-- Page Header -->
                    <div class="page-header">
                        <div>
                            <h1 class="page-title">Property details</h1>
                            <p class="page-subtitle">Registered account: <strong>{{ total_users }}</strong> Users, Staff and Admins Inclusive</p>
                        </div>
                    </div>

                    <!-- Main Content Layout -->
                    <div style="display: grid; grid-template-columns: 1fr 320px; gap: 1.5rem; margin-bottom: 1.5rem;">
                        <!-- Left Column -->
                        <div>
                            <!-- Stat Cards -->
                            <div style="display: grid; grid-template-columns: repeat(4, 1fr); gap: 1rem; margin-bottom: 1.5rem;">
                                <div class="stat-card-modern" style="background: white; border: 1px solid #e5e7eb; border-radius: 0.5rem; padding: 1.25rem; display: flex; align-items: center; justify-content: space-between; box-shadow: 0 1px 3px rgba(0,0,0,0.1); cursor: pointer;">
                                    <div style="display: flex; align-items: center; gap: 0.75rem;">
                                        <div style="width: 2.5rem; height: 2.5rem; border-radius: 0.375rem; background: #f3f4f6; display: flex; align-items: center; justify-content: center;">
                                            <i data-lucide="file-text" style="width: 1.25rem; height: 1.25rem; color: #3b82f6;"></i>
                                        </div>
                                        <div>
                                            <p style="font-size: 0.75rem; color: #6b7280; margin: 0 0 0.25rem 0;">Indexed Articles</p>
                                            <h3 style="font-size: 1.5rem; font-weight: 700; margin: 0; color: #111827;">{{ articles_count|default:"3,712" }}</h3>
                                        </div>
                                    </div>
                                    <a href="{% url 'app:indexed_articles' %}" style="color: #6b7280; text-decoration: none;">
                                        <i data-lucide="external-link" style="width: 1rem; height: 1rem;"></i>
                                    </a>
                                </div>
                                <div class="stat-card-modern" style="background: white; border: 1px solid #e5e7eb; border-radius: 0.5rem; padding: 1.25rem; display: flex; align-items: center; justify-content: space-between; box-shadow: 0 1px 3px rgba(0,0,0,0.1); cursor: pointer;">
                                    <div style="display: flex; align-items: center; gap: 0.75rem;">
                                        <div style="width: 2.5rem; height: 2.5rem; border-radius: 0.375rem; background: #f3f4f6; display: flex; align-items: center; justify-content: center;">
                                            <i data-lucide="layers" style="width: 1.25rem; height: 1.25rem; color: #3b82f6;"></i>
                                        </div>
                                        <div>
                                            <p style="font-size: 0.75rem; color: #6b7280; margin: 0 0 0.25rem 0;">Indexed Journals</p>
                                            <h3 style="font-size: 1.5rem; font-weight: 700; margin: 0; color: #111827;">{{ journals_count|default:"23" }}</h3>
                                        </div>
                                    </div>
                                    <a href="{% url 'app:indexed_journals' %}" style="color: #6b7280; text-decoration: none;">
                                        <i data-lucide="external-link" style="width: 1rem; height: 1rem;"></i>
                                    </a>
                                </div>
                                <div class="stat-card-modern" style="background: white; border: 1px solid #e5e7eb; border-radius: 0.5rem; padding: 1.25rem; display: flex; align-items: center; justify-content: space-between; box-shadow: 0 1px 3px rgba(0,0,0,0.1); cursor: pointer;">
                                    <div style="display: flex; align-items: center; gap: 0.75rem;">
                                        <div style="width: 2.5rem; height: 2.5rem; border-radius: 0.375rem; background: #f3f4f6; display: flex; align-items: center; justify-content: center;">
                                            <i data-lucide="folder" style="width: 1.25rem; height: 1.25rem; color: #3b82f6;"></i>
                                        </div>
                                        <div>
                                            <p style="font-size: 0.75rem; color: #6b7280; margin: 0 0 0.25rem 0;">Archived projects</p>
                                            <h3 style="font-size: 1.5rem; font-weight: 700; margin: 0; color: #111827;">{{ projects_count|default:"1,337" }}</h3>
                                        </div>
                                    </div>
                                    <a href="{% url 'app:project_archive' %}" style="color: #6b7280; text-decoration: none;">
                                        <i data-lucide="external-link" style="width: 1rem; height: 1rem;"></i>
                                    </a>
                                </div>
                                <div class="stat-card-modern" style="background: white; border: 1px solid #e5e7eb; border-radius: 0.5rem; padding: 1.25rem; display: flex; align-items: center; justify-content: space-between; box-shadow: 0 1px 3px rgba(0,0,0,0.1); cursor: pointer;">
                                    <div style="display: flex; align-items: center; gap: 0.75rem;">
                                        <div style="width: 2.5rem; height: 2.5rem; border-radius: 0.375rem; background: #f3f4f6; display: flex; align-items: center; justify-content: center;">
                                            <i data-lucide="check-square" style="width: 1.25rem; height: 1.25rem; color: #3b82f6;"></i>
                                        </div>
                                        <div>
                                            <p style="font-size: 0.75rem; color: #6b7280; margin: 0 0 0.25rem 0;">Pending requests</p>
                                            <h3 style="font-size: 1.5rem; font-weight: 700; margin: 0; color: #111827;">{{ pending_requests_count|default:"304" }}</h3>
                                        </div>
                                    </div>
                                    <a href="#" style="color: #6b7280; text-decoration: none;">
                                        <i data-lucide="external-link" style="width: 1rem; height: 1rem;"></i>
                                    </a>
                                </div>
                            </div>

                            <!-- Statistical Analysis Section -->
                            <div style="background: white; border: 1px solid #e5e7eb; border-radius: 0.5rem; padding: 1rem; margin-bottom: 1.5rem; box-shadow: 0 1px 3px rgba(0,0,0,0.1);">
                                <button style="background: #3b82f6; color: white; border: none; border-radius: 0.375rem; padding: 0.5rem 1rem; font-weight: 500; cursor: pointer; font-size: 0.8125rem; margin-bottom: 1rem; transition: background-color 0.2s;" onmouseover="this.style.background='#2563eb';" onmouseout="this.style.background='#3b82f6';">
                                    Statistical Analysis
                                </button>
                                
                                <div style="display: flex; flex-direction: column; gap: 0.5rem;">
                                    <div style="display: flex; align-items: center; justify-content: space-between; padding: 0.5rem 0;">
                                        <span style="font-size: 0.8125rem; color: #374151;">Registered Members</span>
                                        <strong style="font-size: 0.8125rem; color: #111827;">{{ registered_members_count|default:"23" }} Accounts</strong>
                                    </div>
                                    <div style="display: flex; align-items: center; justify-content: space-between; padding: 0.5rem 0; border-top: 1px solid #f3f4f6;">
                                        <span style="font-size: 0.8125rem; color: #374151;">Directory of Researchers</span>
                                        <strong style="font-size: 0.8125rem; color: #111827;">{{ directory_researchers_count|default:"1337" }} Accounts</strong>
                                    </div>
                                    <div style="display: flex; align-items: center; justify-content: space-between; padding: 0.5rem 0; border-top: 1px solid #f3f4f6;">
                                        <span style="font-size: 0.8125rem; color: #374151;">Eminent personalities</span>
                                        <strong style="font-size: 0.8125rem; color: #111827;">{{ eminent_personalities_count|default:"304" }} Accounts</strong>
                                    </div>
                                </div>
                            </div>

                            <!-- Latest Requests -->
                            <div style="background: white; border: 1px solid #e5e7eb; border-radius: 0.5rem; padding: 1.5rem; box-shadow: 0 1px 3px rgba(0,0,0,0.1);">
                                <div style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 1.25rem;">
                                    <h3 style="font-size: 1.125rem; font-weight: 600; margin: 0; color: #111827;">Latest requests</h3>
                                    <a href="#" style="font-size: 0.875rem; color: #3b82f6; text-decoration: none; font-weight: 500;">LIST ALL</a>
                                </div>
                                <div style="overflow-x: auto;">
                                    <table class="request-table" style="width: 100%; border-collapse: collapse;">
                                        <thead>
                                            <tr style="border-bottom: 1px solid #e5e7eb;">
                                                <th style="text-align: left; padding: 0.75rem; font-size: 0.75rem; font-weight: 600; color: #6b7280; text-transform: uppercase; width: 3rem;">#</th>
                                                <th style="text-align: left; padding: 0.75rem; font-size: 0.75rem; font-weight: 600; color: #6b7280; text-transform: uppercase; width: 3rem;"></th>
                                                <th style="text-align: left; padding: 0.75rem; font-size: 0.75rem; font-weight: 600; color: #6b7280; text-transform: uppercase;">ID</th>
                                                <th style="text-align: left; padding: 0.75rem; font-size: 0.75rem; font-weight: 600; color: #6b7280; text-transform: uppercase;">Email</th>
                                                <th style="text-align: left; padding: 0.75rem; font-size: 0.75rem; font-weight: 600; color: #6b7280; text-transform: uppercase;">Code</th>
                                                <th style="text-align: left; padding: 0.75rem; font-size: 0.75rem; font-weight: 600; color: #6b7280; text-transform: uppercase;">Type</th>
                                                <th style="text-align: left; padding: 0.75rem; font-size: 0.75rem; font-weight: 600; color: #6b7280; text-transform: uppercase;">Attachment</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            {% for request in latest_requests|slice:":10" %}
                                            <tr style="border-bottom: 1px solid #f3f4f6; transition: background-color 0.2s;">
                                                <td style="padding: 1rem 0.75rem; font-size: 0.875rem; color: #6b7280;">{{ forloop.counter }}</td>
                                                <td style="padding: 1rem 0.75rem;">
                                                    <button style="background: none; border: none; cursor: pointer; color: #6b7280; padding: 0.25rem;">
                                                        <i data-lucide="more-vertical" style="width: 1rem; height: 1rem;"></i>
                                                    </button>
                                                </td>
                                                <td style="padding: 1rem 0.75rem; font-size: 0.875rem; color: #111827; font-family: monospace; letter-spacing: 0.05em;">{{ request.id|stringformat:"d"|truncatechars:12 }}</td>
                                                <td style="padding: 1rem 0.75rem; font-size: 0.875rem; color: #111827;">{{ request.email|default:"N/A"|truncatechars:30 }}</td>
                                                <td style="padding: 1rem 0.75rem; font-size: 0.875rem; color: #111827; font-family: monospace; letter-spacing: 0.05em;">{{ request.id|stringformat:"d"|truncatechars:12 }}</td>
                                                <td style="padding: 1rem 0.75rem;">
                                                    <div style="display: flex; align-items: center; gap: 0.5rem;">
                                                        {% if request.type == 'check_plagiarism' %}
                                                        <div style="width: 0.5rem; height: 0.5rem; border-radius: 50%; background: #9333ea;"></div>
                                                        <span style="font-size: 0.875rem; color: #111827;">check plagiarism</span>
                                                        {% elif request.type == 'work_plagiarism' %}
                                                        <div style="width: 0.5rem; height: 0.5rem; border-radius: 50%; background: #22c55e;"></div>
                                                        <span style="font-size: 0.875rem; color: #111827;">work plagiarism</span>
                                                        {% elif request.type == 'thesis_to_article' %}
                                                        <div style="width: 0.5rem; height: 0.5rem; border-radius: 50%; background: #eab308;"></div>
                                                        <span style="font-size: 0.875rem; color: #111827;">thesis to article</span>
                                                        {% elif request.type == 'thesis_to_book' %}
                                                        <div style="width: 0.5rem; height: 0.5rem; border-radius: 50%; background: #1e40af;"></div>
                                                        <span style="font-size: 0.875rem; color: #111827;">thesis to book</span>
                                                        {% elif request.type == 'thesis_to_book_chapter' %}
                                                        <div style="width: 0.5rem; height: 0.5rem; border-radius: 50%; background: #000000;"></div>
                                                        <span style="font-size: 0.875rem; color: #111827;">thesis to book chapter</span>
                                                        {% elif request.type == 'powerpoint_preparation' %}
                                                        <div style="width: 0.5rem; height: 0.5rem; border-radius: 50%; background: #f97316;"></div>
                                                        <span style="font-size: 0.875rem; color: #111827;">power point preparation</span>
                                                        {% endif %}
                                                    </div>
                                                </td>
                                                <td style="padding: 1rem 0.75rem;">
                                                    {% if request.document %}
                                                    <a href="{{ request.document.url }}" style="font-size: 0.875rem; color: #3b82f6; text-decoration: none;">Attachment</a>
                                                    {% else %}
                                                    <span style="font-size: 0.875rem; color: #9ca3af;">-</span>
                                                    {% endif %}
                                                </td>
                                            </tr>
                                            {% empty %}
                                            <tr>
                                                <td colspan="6" style="padding: 2rem; text-align: center; color: #6b7280; font-size: 0.875rem;">No requests found</td>
                                            </tr>
                                            {% endfor %}
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>

                        <!-- Right Sidebar -->
                        <div style="display: flex; flex-direction: column; gap: 1.5rem;">
                            <!-- Recent Account -->
                            <div style="background: white; border: 1px solid #e5e7eb; border-radius: 0.5rem; padding: 1.5rem; box-shadow: 0 1px 3px rgba(0,0,0,0.1);">
                                <h3 style="font-size: 1rem; font-weight: 600; margin: 0 0 1.25rem 0; color: #111827;">Recent account</h3>
                                <div style="display: flex; flex-direction: column; gap: 1rem;">
                                    {% for user in recent_users|slice:":5" %}
                                    <div style="display: flex; align-items: center; justify-content: space-between; padding-bottom: 1rem; border-bottom: 1px solid #f3f4f6;">
                                        <div style="display: flex; align-items: center; gap: 0.75rem; flex: 1;">
                                            <div style="width: 2.5rem; height: 2.5rem; border-radius: 50%; background: #3b82f6; color: white; display: flex; align-items: center; justify-content: center; font-weight: 600; font-size: 0.875rem; flex-shrink: 0;">
                                                {{ user.first_name|first|default:user.username|first|upper }}{{ user.last_name|first|default:""|upper }}
                                            </div>
                                            <div style="flex: 1; min-width: 0;">
                                                <p style="font-size: 0.875rem; font-weight: 500; margin: 0 0 0.25rem 0; color: #111827; white-space: nowrap; overflow: hidden; text-overflow: ellipsis;">{{ user.get_full_name|default:user.username }}</p>
                                                <p style="font-size: 0.75rem; color: #6b7280; margin: 0; white-space: nowrap; overflow: hidden; text-overflow: ellipsis;">{{ user.email|default:"No email" }}</p>
                                            </div>
                                        </div>
                                        <a href="{% url 'app:view_account' user.id %}" style="color: #6b7280; text-decoration: none; margin-left: 0.5rem; flex-shrink: 0; display: flex; align-items: center; justify-content: center; width: 1.5rem; height: 1.5rem; border-radius: 0.25rem; transition: all 0.2s ease;" onmouseover="this.style.backgroundColor='#f3f4f6'; this.style.color='#3b82f6';" onmouseout="this.style.backgroundColor='transparent'; this.style.color='#6b7280';">
                                            <i data-lucide="eye" style="width: 1rem; height: 1rem;"></i>
                                        </a>
                                    </div>
                                    {% empty %}
                                    <p style="font-size: 0.875rem; color: #6b7280; text-align: center; padding: 1rem 0;">No recent accounts</p>
                                    {% endfor %}
                                </div>
                                <a href="{% url 'app:list_accounts' %}" style="display: block; text-align: center; margin-top: 1rem; font-size: 0.875rem; color: #3b82f6; text-decoration: none; font-weight: 500; transition: color 0.2s ease;" onmouseover="this.style.color='#2563eb';" onmouseout="this.style.color='#3b82f6';">List more</a>
                            </div>

                            <!-- Recent Blog -->
                            <div style="background: white; border: 1px solid #e5e7eb; border-radius: 0.5rem; padding: 1.5rem; box-shadow: 0 1px 3px rgba(0,0,0,0.1);">
                                <h3 style="font-size: 1rem; font-weight: 600; margin: 0 0 1.25rem 0; color: #111827;">Recent blog</h3>
                                <div style="display: flex; flex-direction: column; gap: 1rem;">
                                    {% for blog in recent_blogs|slice:":5" %}
                                    <div style="display: flex; gap: 0.75rem; padding-bottom: 1rem; border-bottom: 1px solid #f3f4f6;">
                                        <div style="width: 4rem; height: 4rem; border-radius: 0.375rem; background: #f3f4f6; flex-shrink: 0; display: flex; align-items: center; justify-content: center;">
                                            <i data-lucide="file-text" style="width: 1.5rem; height: 1.5rem; color: #6b7280;"></i>
                                        </div>
                                        <div style="flex: 1; min-width: 0;">
                                            <h4 style="font-size: 0.8125rem; font-weight: 500; margin: 0 0 0.375rem 0; color: #111827; line-height: 1.4; display: -webkit-box; -webkit-line-clamp: 2; -webkit-box-orient: vertical; overflow: hidden;">{{ blog.title|truncatewords:10 }}</h4>
                                            <p style="font-size: 0.75rem; color: #6b7280; margin: 0;">
                                                {% if blog.created_at %}
                                                    {% now "Y" as current_year %}
                                                    {% if blog.created_at|date:"Y" == current_year %}
                                                        {{ blog.created_at|timesince }} ago
                                                    {% else %}
                                                        {{ blog.created_at|date:"Y"|add:"-1"|add:"-1"|add:"-1" }} years ago
                                                    {% endif %}
                                                {% else %}
                                                    3 years ago
                                                {% endif %}
                                            </p>
                                        </div>
                                    </div>
                                    {% empty %}
                                    <p style="font-size: 0.875rem; color: #6b7280; text-align: center; padding: 1rem 0;">No recent blogs</p>
                                    {% endfor %}
                                </div>
                                <a href="#" style="display: block; text-align: center; margin-top: 1rem; font-size: 0.875rem; color: #3b82f6; text-decoration: none; font-weight: 500;">List more</a>
                            </div>
                        </div>
                    </div>
                </div>
                    {% endblock %}
            </main>
        </div>
    </div>

    <script src="{% static 'app/js/dashboard.js' %}"></script>
    <script>
        // Initialize Lucide icons
        if (typeof lucide !== 'undefined') {
            lucide.createIcons();
        }
    </script>
    {% block extra_js %}{% endblock %}
</body>
</html>

