{% extends 'app/base.html' %}
{% load static %}

{% block title %}Project | Research Archive - ScholarIndex{% endblock %}

{% block content %}
<div class="project-archive-page">
  <div class="container">
    <!-- Page Header -->
    <div class="page-header">
      <h1>Project | Research Archive</h1>
      <p>Explore archived research projects and academic initiatives from institutions worldwide</p>
    </div>

    <div class="archive-layout">
      <!-- Sidebar Filters -->
      <aside class="archive-sidebar">
        <div class="filter-section collapsed" id="filterSection">
          <div class="filter-section-header">
            <h3>Filters</h3>
            <button class="filter-toggle-btn" onclick="toggleFilters()">
              <span>Show Filters</span>
              <svg width="16" height="16" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
              </svg>
            </button>
          </div>
          
          <div class="filter-content">
            <form method="get" action="{% url 'app:project_archive' %}" id="filterForm">
              <!-- Search Filter -->
              <div class="filter-group">
                <label>Search Projects</label>
                <input type="text" class="filter-input" name="search" placeholder="Search by title, institution..." id="projectSearch" value="{{ current_search }}">
              </div>

              <!-- Category Filter -->
              <div class="filter-group">
                <label>Category</label>
                <select class="filter-select" name="category" id="categoryFilter">
                  <option value="">All Categories</option>
                  {% for cat in categories %}
                    <option value="{{ cat }}" {% if current_category == cat %}selected{% endif %}>{{ cat }}</option>
                  {% endfor %}
                </select>
              </div>

              <!-- Institution Filter -->
              <div class="filter-group">
                <label>Institution</label>
                <select class="filter-select" name="institution" id="institutionFilter">
                  <option value="">All Institutions</option>
                  {% for inst in institutions %}
                    <option value="{{ inst }}" {% if current_institution == inst %}selected{% endif %}>{{ inst }}</option>
                  {% endfor %}
                </select>
              </div>

              <!-- Year Filter -->
              <div class="filter-group">
                <label>Year</label>
                <select class="filter-select" name="year" id="yearFilter">
                  <option value="">All Years</option>
                  {% for year_obj in years %}
                    <option value="{{ year_obj|date:'Y' }}" {% if current_year == year_obj|date:'Y' %}selected{% endif %}>{{ year_obj|date:'Y' }}</option>
                  {% endfor %}
                </select>
              </div>

              <!-- Status Filter -->
              <div class="filter-group">
                <label>Status</label>
                <select class="filter-select" name="status" id="statusFilter">
                  <option value="">All Status</option>
                  <option value="active" {% if current_status == 'active' %}selected{% endif %}>Active</option>
                  <option value="completed" {% if current_status == 'completed' %}selected{% endif %}>Completed</option>
                  <option value="archived" {% if current_status == 'archived' %}selected{% endif %}>Archived</option>
                </select>
              </div>

              <!-- Sort By -->
              <div class="filter-group">
                <label>Sort By</label>
                <select class="filter-select" name="sort" id="sortFilter">
                  <option value="recent" {% if current_sort == 'recent' %}selected{% endif %}>Most Recent</option>
                  <option value="oldest" {% if current_sort == 'oldest' %}selected{% endif %}>Oldest First</option>
                  <option value="title" {% if current_sort == 'title' %}selected{% endif %}>Title (A-Z)</option>
                </select>
              </div>

              <!-- Submit and Clear Filters -->
              <button type="submit" class="btn-filter-clear" style="background-color: var(--primary); color: var(--primary-foreground); margin-bottom: 0.5rem;">Apply Filters</button>
              <button type="button" class="btn-filter-clear" onclick="clearFilters()">Clear All Filters</button>
            </form>
          </div>
        </div>
      </aside>

      <!-- Main Content -->
      <main class="archive-main">
        <!-- Results Header -->
        <div class="results-header">
          <div class="results-count">
            <span id="resultsCount">342</span> projects found
          </div>
          <div class="view-toggle">
            <button class="view-btn active" data-view="grid" onclick="toggleView('grid')">
              <svg width="20" height="20" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2V6zM14 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V6zM4 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2v-2zM14 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z"></path>
              </svg>
            </button>
            <button class="view-btn" data-view="list" onclick="toggleView('list')">
              <svg width="20" height="20" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path>
              </svg>
            </button>
          </div>
        </div>

        <!-- Projects Grid -->
        <div class="projects-grid" id="projectsContainer">
          <!-- Project Card 1 -->
          <article class="project-card">
            <div class="project-header">
              <span class="project-badge">Research Project</span>
              <span class="project-status active">Active</span>
            </div>
            <div class="project-image">
              <div class="project-image-placeholder">
                <svg width="64" height="64" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"></path>
                </svg>
              </div>
            </div>
            <h3 class="project-title">
              <a href="#">Quantum Computing Research Initiative</a>
            </h3>
            <p class="project-institution">
              <strong>Institution:</strong> MIT Quantum Lab
            </p>
            <p class="project-description">
              A comprehensive research initiative focused on developing next-generation quantum computing systems and algorithms for solving complex computational problems...
            </p>
            <div class="project-meta">
              <span class="meta-item">
                <svg width="16" height="16" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                </svg>
                Started: 2022
              </span>
              <span class="meta-item">
                <svg width="16" height="16" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z"></path>
                </svg>
                15 Researchers
              </span>
              <span class="meta-item">
                <svg width="16" height="16" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                </svg>
                $2.5M Funding
              </span>
            </div>
            <div class="project-actions">
              <a href="#" class="btn-view-project">View Project</a>
              <a href="#" class="btn-download-archive">Download Archive</a>
            </div>
          </article>

          <!-- Project Card 2 -->
          <article class="project-card">
            <div class="project-header">
              <span class="project-badge">Collaboration</span>
              <span class="project-status completed">Completed</span>
            </div>
            <div class="project-image">
              <div class="project-image-placeholder">
                <svg width="64" height="64" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"></path>
                </svg>
              </div>
            </div>
            <h3 class="project-title">
              <a href="#">Global Climate Change Research Network</a>
            </h3>
            <p class="project-institution">
              <strong>Institution:</strong> Stanford Environmental Research Center
            </p>
            <p class="project-description">
              An international collaboration studying climate change impacts and developing sustainable solutions across multiple continents and research institutions...
            </p>
            <div class="project-meta">
              <span class="meta-item">
                <svg width="16" height="16" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                </svg>
                Completed: 2023
              </span>
              <span class="meta-item">
                <svg width="16" height="16" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z"></path>
                </svg>
                28 Researchers
              </span>
              <span class="meta-item">
                <svg width="16" height="16" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                </svg>
                $5.8M Funding
              </span>
            </div>
            <div class="project-actions">
              <a href="#" class="btn-view-project">View Project</a>
              <a href="#" class="btn-download-archive">Download Archive</a>
            </div>
          </article>

          <!-- Project Card 3 -->
          <article class="project-card">
            <div class="project-header">
              <span class="project-badge">Grant Funded</span>
              <span class="project-status active">Active</span>
            </div>
            <div class="project-image">
              <div class="project-image-placeholder">
                <svg width="64" height="64" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"></path>
                </svg>
              </div>
            </div>
            <h3 class="project-title">
              <a href="#">AI-Powered Medical Diagnostics Development</a>
            </h3>
            <p class="project-institution">
              <strong>Institution:</strong> Harvard Medical School
            </p>
            <p class="project-description">
              Developing advanced AI algorithms for early disease detection and medical imaging analysis to improve diagnostic accuracy and patient outcomes...
            </p>
            <div class="project-meta">
              <span class="meta-item">
                <svg width="16" height="16" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                </svg>
                Started: 2023
              </span>
              <span class="meta-item">
                <svg width="16" height="16" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z"></path>
                </svg>
                12 Researchers
              </span>
              <span class="meta-item">
                <svg width="16" height="16" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                </svg>
                $1.8M Funding
              </span>
            </div>
            <div class="project-actions">
              <a href="#" class="btn-view-project">View Project</a>
              <a href="#" class="btn-download-archive">Download Archive</a>
            </div>
          </article>

          <!-- Project Card 4 -->
          <article class="project-card">
            <div class="project-header">
              <span class="project-badge">International</span>
              <span class="project-status active">Active</span>
            </div>
            <div class="project-image">
              <div class="project-image-placeholder">
                <svg width="64" height="64" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"></path>
                </svg>
              </div>
            </div>
            <h3 class="project-title">
              <a href="#">Renewable Energy Systems Research</a>
            </h3>
            <p class="project-institution">
              <strong>Institution:</strong> ETH Zurich Energy Lab
            </p>
            <p class="project-description">
              A multi-national research project exploring innovative renewable energy technologies and their integration into existing power grids...
            </p>
            <div class="project-meta">
              <span class="meta-item">
                <svg width="16" height="16" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                </svg>
                Started: 2021
              </span>
              <span class="meta-item">
                <svg width="16" height="16" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z"></path>
                </svg>
                22 Researchers
              </span>
              <span class="meta-item">
                <svg width="16" height="16" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                </svg>
                $4.2M Funding
              </span>
            </div>
            <div class="project-actions">
              <a href="#" class="btn-view-project">View Project</a>
              <a href="#" class="btn-download-archive">Download Archive</a>
            </div>
          </article>

          <!-- Project Card 5 -->
          <article class="project-card">
            <div class="project-header">
              <span class="project-badge">Institutional</span>
              <span class="project-status completed">Completed</span>
            </div>
            <div class="project-image">
              <div class="project-image-placeholder">
                <svg width="64" height="64" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"></path>
                </svg>
              </div>
            </div>
            <h3 class="project-title">
              <a href="#">Genomics and Personalized Medicine Initiative</a>
            </h3>
            <p class="project-institution">
              <strong>Institution:</strong> Oxford University Medical Research
            </p>
            <p class="project-description">
              A comprehensive study on genomics applications in personalized medicine, focusing on genetic markers and treatment optimization...
            </p>
            <div class="project-meta">
              <span class="meta-item">
                <svg width="16" height="16" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                </svg>
                Completed: 2022
              </span>
              <span class="meta-item">
                <svg width="16" height="16" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z"></path>
                </svg>
                18 Researchers
              </span>
              <span class="meta-item">
                <svg width="16" height="16" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                </svg>
                $3.1M Funding
              </span>
            </div>
            <div class="project-actions">
              <a href="#" class="btn-view-project">View Project</a>
              <a href="#" class="btn-download-archive">Download Archive</a>
            </div>
          </article>

          <!-- Project Card 6 -->
          <article class="project-card">
            <div class="project-header">
              <span class="project-badge">Research Project</span>
              <span class="project-status active">Active</span>
            </div>
            <div class="project-image">
              <div class="project-image-placeholder">
                <svg width="64" height="64" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"></path>
                </svg>
              </div>
            </div>
            <h3 class="project-title">
              <a href="#">Neuroscience and Brain-Computer Interfaces</a>
            </h3>
            <p class="project-institution">
              <strong>Institution:</strong> Cambridge Neuroscience Institute
            </p>
            <p class="project-description">
              Advanced research on brain-computer interfaces and neural signal processing for medical applications and assistive technologies...
            </p>
            <div class="project-meta">
              <span class="meta-item">
                <svg width="16" height="16" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                </svg>
                Started: 2024
              </span>
              <span class="meta-item">
                <svg width="16" height="16" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z"></path>
                </svg>
                9 Researchers
              </span>
              <span class="meta-item">
                <svg width="16" height="16" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                </svg>
                $1.5M Funding
              </span>
            </div>
            <div class="project-actions">
              <a href="#" class="btn-view-project">View Project</a>
              <a href="#" class="btn-download-archive">Download Archive</a>
            </div>
          </article>
        </div>

        <!-- Pagination -->
        <div class="pagination">
          <button class="pagination-btn" disabled>
            <svg width="16" height="16" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"></path>
            </svg>
            Previous
          </button>
          <div class="pagination-numbers">
            <button class="pagination-number active">1</button>
            <button class="pagination-number">2</button>
            <button class="pagination-number">3</button>
            <button class="pagination-number">4</button>
            <button class="pagination-number">5</button>
            <span class="pagination-ellipsis">...</span>
            <button class="pagination-number">12</button>
          </div>
          <button class="pagination-btn">
            Next
            <svg width="16" height="16" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
            </svg>
          </button>
        </div>
      </main>
    </div>
  </div>
</div>

<script>
  function toggleView(view) {
    const container = document.getElementById('projectsContainer');
    const buttons = document.querySelectorAll('.view-btn');
    
    buttons.forEach(btn => btn.classList.remove('active'));
    event.target.closest('.view-btn').classList.add('active');
    
    if (view === 'list') {
      container.classList.add('list-view');
    } else {
      container.classList.remove('list-view');
    }
  }

  function toggleFilters() {
    const filterSection = document.getElementById('filterSection');
    const toggleBtn = filterSection.querySelector('.filter-toggle-btn span');
    
    filterSection.classList.toggle('collapsed');
    
    if (filterSection.classList.contains('collapsed')) {
      toggleBtn.textContent = 'Show Filters';
    } else {
      toggleBtn.textContent = 'Hide Filters';
    }
  }

  function clearFilters() {
    window.location.href = '{% url "app:project_archive" %}';
  }

  // Auto-submit form when select filters change
  document.getElementById('categoryFilter')?.addEventListener('change', function(e) {
    document.getElementById('filterForm').submit();
  });

  document.getElementById('institutionFilter')?.addEventListener('change', function(e) {
    document.getElementById('filterForm').submit();
  });

  document.getElementById('yearFilter')?.addEventListener('change', function(e) {
    document.getElementById('filterForm').submit();
  });

  document.getElementById('statusFilter')?.addEventListener('change', function(e) {
    document.getElementById('filterForm').submit();
  });

  document.getElementById('sortFilter')?.addEventListener('change', function(e) {
    document.getElementById('filterForm').submit();
  });

  // Debounce search input to avoid too many requests
  let searchTimeout;
  document.getElementById('projectSearch')?.addEventListener('input', function(e) {
    clearTimeout(searchTimeout);
    searchTimeout = setTimeout(function() {
      document.getElementById('filterForm').submit();
    }, 500); // Wait 500ms after user stops typing
  });
</script>
{% endblock %}

