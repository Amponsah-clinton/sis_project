{% extends 'app/base.html' %}
{% load static %}

{% block title %}Eminent Personalities - ScholarIndex{% endblock %}

{% block content %}
<style>
  .hall-of-fame-page {
    padding: 2rem;
    background-color: var(--background);
    min-height: calc(100vh - 5rem);
  }

  .hall-wrapper {
    max-width: 1400px;
    margin: 0 auto;
  }

  .hall-layout {
    display: grid;
    grid-template-columns: 300px 1fr;
    gap: 2rem;
    align-items: start;
  }

  @media (max-width: 1024px) {
    .hall-layout {
      grid-template-columns: 1fr;
    }

    .hall-sidebar {
      order: 2;
    }
  }

  /* Filter Sidebar */
  .hall-sidebar {
    position: sticky;
    top: 100px;
    height: fit-content;
    max-height: calc(100vh - 300px);
    overflow-y: auto;
  }

  .filter-section {
    background-color: #ffffff;
    border: 1px solid #e5e7eb;
    border-radius: 8px;
    margin-bottom: 0.375rem;
    overflow: hidden;
  }

  .filter-header {
    padding: 0.5rem 0.75rem;
    background-color: #ffffff;
    border-bottom: 1px solid #e5e7eb;
    cursor: pointer;
    display: flex;
    justify-content: space-between;
    align-items: center;
    font-weight: 700;
    font-size: 0.8125rem;
    color: #111827;
    user-select: none;
  }

  .filter-header:hover {
    background-color: #f9fafb;
  }

  .filter-header svg {
    width: 16px;
    height: 16px;
    transition: transform 0.2s;
  }

  .filter-section.collapsed .filter-header svg {
    transform: rotate(-90deg);
  }

  .filter-content {
    padding: 0.375rem;
    display: block;
  }

  .filter-section.collapsed .filter-content {
    display: none;
  }

  .filter-search {
    width: 100%;
    padding: 0.375rem 0.5rem;
    border: 1px solid #d1d5db;
    border-radius: 4px;
    font-size: 0.75rem;
    margin-bottom: 0.375rem;
    background-color: #ffffff;
  }

  .filter-search:focus {
    outline: none;
    border-color: #3b82f6;
  }

  .filter-list {
    max-height: 120px;
    overflow-y: auto;
    list-style: none;
    padding: 0;
    margin: 0;
  }

  .filter-item {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 0.25rem 0;
    cursor: pointer;
  }

  .filter-item:hover {
    background-color: #f9fafb;
    margin: 0 -0.5rem;
    padding-left: 0.5rem;
    padding-right: 0.5rem;
  }

  .filter-item-label {
    display: flex;
    align-items: center;
    flex: 1;
    cursor: pointer;
  }

  .filter-item-label input[type="checkbox"] {
    margin-right: 0.5rem;
    cursor: pointer;
  }

  .filter-item-label span {
    font-size: 0.8125rem;
    color: #374151;
  }

  .filter-count {
    background-color: #f97316;
    color: #ffffff;
    padding: 0.125rem 0.5rem;
    border-radius: 12px;
    font-size: 0.75rem;
    font-weight: 600;
    min-width: 32px;
    text-align: center;
  }

  .reset-button {
    width: 100%;
    padding: 0.5rem 0.75rem;
    background-color: #dc2626;
    color: #ffffff;
    border: none;
    border-radius: 6px;
    font-size: 0.8125rem;
    font-weight: 600;
    cursor: pointer;
    transition: background-color 0.2s;
    margin-top: 0.375rem;
  }

  .reset-button:hover {
    background-color: #b91c1c;
  }

  /* Main Content */
  .hall-main {
    background-color: #ffffff;
    border-radius: 8px;
    padding: 1.5rem;
  }

  .search-bar-container {
    margin-bottom: 1.5rem;
  }

  .search-bar {
    width: 100%;
    padding: 0.875rem 1rem;
    padding-right: 3rem;
    border: 1px solid #d1d5db;
    border-radius: 6px;
    font-size: 0.9375rem;
    background-color: #ffffff;
    position: relative;
  }

  .search-bar:focus {
    outline: none;
    border-color: #3b82f6;
    box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);
  }

  .search-bar-wrapper {
    position: relative;
  }

  .search-icon {
    position: absolute;
    right: 1rem;
    top: 50%;
    transform: translateY(-50%);
    width: 20px;
    height: 20px;
    color: #6b7280;
    pointer-events: none;
  }

  .hall-cards {
    display: flex;
    flex-direction: column;
    gap: 1.5rem;
  }

  .hall-card {
    background-color: #ffffff;
    border: 1px solid #e5e7eb;
    border-radius: 8px;
    padding: 1.5rem;
    display: flex;
    gap: 1.5rem;
    transition: box-shadow 0.2s;
  }

  .hall-card:hover {
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
  }

  .hall-card-image {
    width: 120px;
    height: 120px;
    border-radius: 8px;
    object-fit: cover;
    flex-shrink: 0;
    background-color: #f3f4f6;
  }

  .hall-card-content {
    flex: 1;
    display: flex;
    flex-direction: column;
    gap: 0.5rem;
  }

  .hall-card-header {
    display: flex;
    justify-content: space-between;
    align-items: flex-start;
    margin-bottom: 0.5rem;
  }

  .hall-card-id {
    font-size: 0.75rem;
    color: #6b7280;
    font-weight: 500;
  }

  .hall-card-location {
    display: flex;
    align-items: center;
    gap: 0.25rem;
    font-size: 0.8125rem;
    color: #6b7280;
  }

  .hall-card-location svg {
    width: 14px;
    height: 14px;
  }

  .hall-name-wrapper {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    margin-bottom: 0.25rem;
  }

  .hall-name {
    font-size: 1.125rem;
    font-weight: 700;
    color: #2563eb;
    margin: 0;
  }

  .verification-icon {
    width: 18px;
    height: 18px;
    color: #2563eb;
    flex-shrink: 0;
  }

  .hall-category {
    font-size: 0.875rem;
    color: #f97316;
    font-weight: 600;
    margin-bottom: 0.25rem;
  }

  .hall-affiliation {
    font-size: 0.875rem;
    color: #6b7280;
    margin-bottom: 0.5rem;
  }

  .hall-bio {
    font-size: 0.875rem;
    color: #374151;
    line-height: 1.6;
    margin-bottom: 0.75rem;
    display: -webkit-box;
    -webkit-line-clamp: 3;
    -webkit-box-orient: vertical;
    overflow: hidden;
  }

  .hall-bio-full {
    display: none;
  }

  .read-more {
    color: #2563eb;
    text-decoration: none;
    font-size: 0.875rem;
    font-weight: 500;
    cursor: pointer;
  }

  .read-more:hover {
    text-decoration: underline;
  }

  .btn-download {
    background-color: #10b981;
    color: #ffffff;
    border: none;
    border-radius: 6px;
    padding: 0.625rem 1.25rem;
    font-size: 0.875rem;
    font-weight: 600;
    cursor: pointer;
    transition: background-color 0.2s;
    align-self: flex-start;
  }

  .btn-download:hover {
    background-color: #059669;
  }

  @media (max-width: 768px) {
    .hall-of-fame-page {
      padding: 1rem;
    }

    .hall-card {
      flex-direction: column;
    }

    .hall-card-image {
      width: 100%;
      height: 200px;
    }
  }
</style>

<div class="hall-of-fame-page">
  <div class="hall-wrapper">
    <div class="hall-layout">
      <!-- Filter Sidebar -->
      <aside class="hall-sidebar">
        <!-- Year Inducted Filter -->
        <div class="filter-section" id="year-filter">
          <div class="filter-header" onclick="toggleFilter('year-filter')">
            <span>YEAR INDUCTED</span>
            <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
            </svg>
          </div>
          <div class="filter-content">
            <input type="text" class="filter-search" id="year-search" placeholder="Search Year Inducted" onkeyup="filterYears()">
            <ul class="filter-list" id="year-list">
              {% for year in years %}
              <li class="filter-item">
                <label class="filter-item-label">
                  <input type="checkbox" class="filter-checkbox" data-type="year" data-value="{{ year.year }}" onchange="applyFilters()">
                  <span>{{ year.year }}</span>
                </label>
                <span class="filter-count">{{ year.count }}</span>
              </li>
              {% empty %}
              <li class="filter-item">
                <label class="filter-item-label">
                  <input type="checkbox" class="filter-checkbox" data-type="year" data-value="2022" onchange="applyFilters()">
                  <span>2022</span>
                </label>
                <span class="filter-count">11</span>
              </li>
              <li class="filter-item">
                <label class="filter-item-label">
                  <input type="checkbox" class="filter-checkbox" data-type="year" data-value="2023" onchange="applyFilters()">
                  <span>2023</span>
                </label>
                <span class="filter-count">5</span>
              </li>
              {% endfor %}
            </ul>
          </div>
        </div>

        <!-- Discipline Filter -->
        <div class="filter-section collapsed" id="discipline-filter">
          <div class="filter-header" onclick="toggleFilter('discipline-filter')">
            <span>DISCIPLINE</span>
            <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
            </svg>
          </div>
          <div class="filter-content">
            <input type="text" class="filter-search" id="discipline-search" placeholder="Search discipline" onkeyup="filterDisciplines()">
            <ul class="filter-list" id="discipline-list">
              {% for discipline in disciplines %}
              <li class="filter-item">
                <label class="filter-item-label">
                  <input type="checkbox" class="filter-checkbox" data-type="discipline" data-value="{{ discipline.name }}" onchange="applyFilters()">
                  <span>{{ discipline.name }}</span>
                </label>
                <span class="filter-count">{{ discipline.count }}</span>
              </li>
              {% endfor %}
            </ul>
          </div>
        </div>

        <!-- Category Filter -->
        <div class="filter-section collapsed" id="category-filter">
          <div class="filter-header" onclick="toggleFilter('category-filter')">
            <span>CATEGORY</span>
            <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
            </svg>
          </div>
          <div class="filter-content">
            <input type="text" class="filter-search" id="category-search" placeholder="Search category" onkeyup="filterCategories()">
            <ul class="filter-list" id="category-list">
              {% for category in categories %}
              <li class="filter-item">
                <label class="filter-item-label">
                  <input type="checkbox" class="filter-checkbox" data-type="category" data-value="{{ category.name }}" onchange="applyFilters()">
                  <span>{{ category.name }}</span>
                </label>
                <span class="filter-count">{{ category.count }}</span>
              </li>
              {% endfor %}
            </ul>
          </div>
        </div>

        <button class="reset-button" onclick="resetFilters()">Reset</button>
      </aside>

      <!-- Main Content -->
      <main class="hall-main">
        <!-- Search Bar -->
        <div class="search-bar-container">
          <div class="search-bar-wrapper">
            <input type="text" class="search-bar" id="personality-search" placeholder="Search Eminent Personalities" onkeyup="filterPersonalities()">
            <svg class="search-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path>
            </svg>
          </div>
        </div>

        <!-- Hall of Fame Cards -->
        <div class="hall-cards" id="hallCards">
          {% for honoree in honorees %}
          <article class="hall-card" data-year="{{ honoree.created_at|date:'Y' }}" data-discipline="{{ honoree.nominee_position }}" data-category="Eminent Individuals">
            <img src="https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?w=400&h=400&fit=crop&crop=face" alt="{{ honoree.nominee_first_name }} {{ honoree.nominee_last_name }}" class="hall-card-image" onerror="this.src='https://via.placeholder.com/120x120?text={{ honoree.nominee_first_name|first }}{{ honoree.nominee_last_name|first }}'">
            <div class="hall-card-content">
              <div class="hall-card-header">
                <div class="hall-card-id">SIS{{ honoree.id|stringformat:"04d" }}HF{{ honoree.created_at|date:"y" }}</div>
                <div class="hall-card-location">
                  <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"></path>
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 11a3 3 0 11-6 0 3 3 0 016 0z"></path>
                  </svg>
                  <span>{{ honoree.nominee_institution|default:"United States" }}</span>
                </div>
              </div>
              <div class="hall-name-wrapper">
                <h3 class="hall-name">{{ honoree.nominee_first_name }} {{ honoree.nominee_last_name }}</h3>
                <svg class="verification-icon" fill="currentColor" viewBox="0 0 20 20">
                  <path fill-rule="evenodd" d="M6.267 3.455a3.066 3.066 0 001.745-.723 3.066 3.066 0 013.976 0 3.066 3.066 0 001.745.723 3.066 3.066 0 012.812 2.812c.051.643.304 1.254.723 1.745a3.066 3.066 0 010 3.976 3.066 3.066 0 00-.723 1.745 3.066 3.066 0 01-2.812 2.812 3.066 3.066 0 00-1.745.723 3.066 3.066 0 01-3.976 0 3.066 3.066 0 00-1.745-.723 3.066 3.066 0 01-2.812-2.812 3.066 3.066 0 00-.723-1.745 3.066 3.066 0 010-3.976 3.066 3.066 0 00.723-1.745 3.066 3.066 0 012.812-2.812zm7.44 5.252a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"></path>
                </svg>
              </div>
              <div class="hall-category">Eminent Individuals: {{ honoree.nominee_position|default:"Computer Science" }}</div>
              <div class="hall-affiliation">{{ honoree.nominee_institution }}</div>
              <div class="hall-bio">
                <span class="hall-bio-short">{{ honoree.research_achievements|truncatewords:30 }}</span>
                <span class="hall-bio-full">{{ honoree.research_achievements }}</span>
                <a href="#" class="read-more" onclick="toggleBio(this); return false;">read more</a>
              </div>
              <button class="btn-download" onclick="downloadProfile({{ honoree.id }})">Download Profile</button>
            </div>
          </article>
          {% empty %}
          <!-- Sample cards for demonstration -->
          <article class="hall-card" data-year="2022" data-discipline="Computer Science" data-category="Eminent Individuals">
            <img src="https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?w=400&h=400&fit=crop&crop=face" alt="Professor Michael D. Smith" class="hall-card-image">
            <div class="hall-card-content">
              <div class="hall-card-header">
                <div class="hall-card-id">SIS8264HF124</div>
                <div class="hall-card-location">
                  <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"></path>
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 11a3 3 0 11-6 0 3 3 0 016 0z"></path>
                  </svg>
                  <span>United States</span>
                </div>
              </div>
              <div class="hall-name-wrapper">
                <h3 class="hall-name">Professor Michael D. Smith</h3>
                <svg class="verification-icon" fill="currentColor" viewBox="0 0 20 20">
                  <path fill-rule="evenodd" d="M6.267 3.455a3.066 3.066 0 001.745-.723 3.066 3.066 0 013.976 0 3.066 3.066 0 001.745.723 3.066 3.066 0 012.812 2.812c.051.643.304 1.254.723 1.745a3.066 3.066 0 010 3.976 3.066 3.066 0 00-.723 1.745 3.066 3.066 0 01-2.812 2.812 3.066 3.066 0 00-1.745.723 3.066 3.066 0 01-3.976 0 3.066 3.066 0 00-1.745-.723 3.066 3.066 0 01-2.812-2.812 3.066 3.066 0 00-.723-1.745 3.066 3.066 0 010-3.976 3.066 3.066 0 00.723-1.745 3.066 3.066 0 012.812-2.812zm7.44 5.252a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"></path>
                </svg>
              </div>
              <div class="hall-category">Eminent Individuals: Computer Science</div>
              <div class="hall-affiliation">Harvard University</div>
              <div class="hall-bio">
                <span class="hall-bio-short">John H. Finley, Jr. Professor of Engineering and Applied Sciences; Distinguished Service Professor at Harvard University Michael D. Smith is the...</span>
                <span class="hall-bio-full">John H. Finley, Jr. Professor of Engineering and Applied Sciences; Distinguished Service Professor at Harvard University Michael D. Smith is the John H. Finley, Jr. Professor of Engineering and Applied Sciences and Distinguished Service Professor at Harvard University. He has made significant contributions to computer science and engineering education.</span>
                <a href="#" class="read-more" onclick="toggleBio(this); return false;">read more</a>
              </div>
              <button class="btn-download" onclick="downloadProfile(8264)">Download Profile</button>
            </div>
          </article>

          <article class="hall-card" data-year="2023" data-discipline="Political Leader" data-category="Inspirational People">
            <img src="https://images.unsplash.com/photo-1494790108377-be9c29b29330?w=400&h=400&fit=crop&crop=face" alt="Jacinda Ardern" class="hall-card-image">
            <div class="hall-card-content">
              <div class="hall-card-header">
                <div class="hall-card-id">SIS2591HF92</div>
                <div class="hall-card-location">
                  <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"></path>
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 11a3 3 0 11-6 0 3 3 0 016 0z"></path>
                  </svg>
                  <span>New Zealand</span>
                </div>
              </div>
              <div class="hall-name-wrapper">
                <h3 class="hall-name">Jacinda Ardern</h3>
                <svg class="verification-icon" fill="currentColor" viewBox="0 0 20 20">
                  <path fill-rule="evenodd" d="M6.267 3.455a3.066 3.066 0 001.745-.723 3.066 3.066 0 013.976 0 3.066 3.066 0 001.745.723 3.066 3.066 0 012.812 2.812c.051.643.304 1.254.723 1.745a3.066 3.066 0 010 3.976 3.066 3.066 0 00-.723 1.745 3.066 3.066 0 01-2.812 2.812 3.066 3.066 0 00-1.745.723 3.066 3.066 0 01-3.976 0 3.066 3.066 0 00-1.745-.723 3.066 3.066 0 01-2.812-2.812 3.066 3.066 0 00-.723-1.745 3.066 3.066 0 010-3.976 3.066 3.066 0 00.723-1.745 3.066 3.066 0 012.812-2.812zm7.44 5.252a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"></path>
                </svg>
              </div>
              <div class="hall-category">Inspirational People: Political Leader</div>
              <div class="hall-affiliation">Prime Minister Of New Zealand</div>
              <div class="hall-bio">
                <span class="hall-bio-short">Jacinda Ardern is the current Prime Minister of New Zealand. She became the youngest female head of state, assuming office on 26 October 2017. She is...</span>
                <span class="hall-bio-full">Jacinda Ardern is the current Prime Minister of New Zealand. She became the youngest female head of state, assuming office on 26 October 2017. She is known for her compassionate leadership and progressive policies that have made a significant impact on New Zealand and the world.</span>
                <a href="#" class="read-more" onclick="toggleBio(this); return false;">read more</a>
              </div>
              <button class="btn-download" onclick="downloadProfile(2591)">Download Profile</button>
            </div>
          </article>
          {% endfor %}
        </div>
      </main>
    </div>
  </div>
</div>

<script>
  // Store all personalities data
  const allPersonalities = Array.from(document.querySelectorAll('.hall-card')).map(card => ({
    id: card.querySelector('.hall-card-id')?.textContent || '',
    name: card.querySelector('.hall-name')?.textContent || '',
    category: card.querySelector('.hall-category')?.textContent || '',
    affiliation: card.querySelector('.hall-affiliation')?.textContent || '',
    bio: card.querySelector('.hall-bio-short')?.textContent || '',
    year: card.dataset.year || '',
    discipline: card.dataset.discipline || '',
    categoryType: card.dataset.category || '',
  }));

  function toggleFilter(filterId) {
    const section = document.getElementById(filterId);
    section.classList.toggle('collapsed');
  }

  function filterYears() {
    const searchTerm = document.getElementById('year-search').value.toLowerCase();
    const items = document.querySelectorAll('#year-list .filter-item');
    items.forEach(item => {
      const text = item.textContent.toLowerCase();
      item.style.display = text.includes(searchTerm) ? 'flex' : 'none';
    });
  }

  function filterDisciplines() {
    const searchTerm = document.getElementById('discipline-search').value.toLowerCase();
    const items = document.querySelectorAll('#discipline-list .filter-item');
    items.forEach(item => {
      const text = item.textContent.toLowerCase();
      item.style.display = text.includes(searchTerm) ? 'flex' : 'none';
    });
  }

  function filterCategories() {
    const searchTerm = document.getElementById('category-search').value.toLowerCase();
    const items = document.querySelectorAll('#category-list .filter-item');
    items.forEach(item => {
      const text = item.textContent.toLowerCase();
      item.style.display = text.includes(searchTerm) ? 'flex' : 'none';
    });
  }

  function applyFilters() {
    const selectedYears = Array.from(document.querySelectorAll('input[data-type="year"]:checked')).map(cb => cb.dataset.value);
    const selectedDisciplines = Array.from(document.querySelectorAll('input[data-type="discipline"]:checked')).map(cb => cb.dataset.value);
    const selectedCategories = Array.from(document.querySelectorAll('input[data-type="category"]:checked')).map(cb => cb.dataset.value);
    const searchTerm = document.getElementById('personality-search').value.toLowerCase();

    const cards = document.querySelectorAll('.hall-card');
    let visibleCount = 0;

    cards.forEach((card, index) => {
      if (index >= allPersonalities.length) return;
      
      const personality = allPersonalities[index];
      let visible = true;

      // Filter by search term
      if (searchTerm) {
        const matchesSearch = 
          (personality.name || '').toLowerCase().includes(searchTerm) ||
          (personality.affiliation || '').toLowerCase().includes(searchTerm) ||
          (personality.category || '').toLowerCase().includes(searchTerm) ||
          (personality.bio || '').toLowerCase().includes(searchTerm);
        if (!matchesSearch) visible = false;
      }

      // Filter by year
      if (selectedYears.length > 0) {
        if (!selectedYears.includes(personality.year)) visible = false;
      }

      // Filter by discipline
      if (selectedDisciplines.length > 0) {
        const matchesDiscipline = selectedDisciplines.some(d => 
          (personality.discipline || '').toLowerCase().includes(d.toLowerCase())
        );
        if (!matchesDiscipline) visible = false;
      }

      // Filter by category
      if (selectedCategories.length > 0) {
        if (!selectedCategories.includes(personality.categoryType)) visible = false;
      }

      if (visible) {
        card.style.display = 'flex';
        visibleCount++;
      } else {
        card.style.display = 'none';
      }
    });
  }

  function filterPersonalities() {
    applyFilters();
  }

  function resetFilters() {
    document.getElementById('personality-search').value = '';
    document.getElementById('year-search').value = '';
    document.getElementById('discipline-search').value = '';
    document.getElementById('category-search').value = '';
    document.querySelectorAll('.filter-checkbox').forEach(cb => cb.checked = false);
    document.querySelectorAll('.hall-card').forEach(card => card.style.display = 'flex');
    filterYears();
    filterDisciplines();
    filterCategories();
  }

  function toggleBio(element) {
    const bioDiv = element.closest('.hall-bio');
    const short = bioDiv.querySelector('.hall-bio-short');
    const full = bioDiv.querySelector('.hall-bio-full');
    
    if (short.style.display === 'none') {
      short.style.display = '-webkit-box';
      full.style.display = 'none';
      element.textContent = 'read more';
    } else {
      short.style.display = 'none';
      full.style.display = 'block';
      element.textContent = 'read less';
    }
  }

  function downloadProfile(id) {
    // Implement download functionality
    alert('Downloading profile for ID: ' + id);
  }
</script>
{% endblock %}




